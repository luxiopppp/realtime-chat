<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link 
      rel="stylesheet" 
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" 
      integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" 
      crossorigin="anonymous" 
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
	  <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/chat.css">
    <link rel="stylesheet" href="/css/modal.css">
  <title>Realtime Chat</title>
</head>
<body>
    <div id="username-modal" class="modal disable-this">
      <div class="modal-elements">
        <h2>Enter a username</h2>
        <form class="username-form" id="username-form">
          <input type="text" id="username-input" placeholder="Enter your username">
          <button type="submit" class="btn" id="submit-username">Join</button>
        </form>
      </div>
    </div>
    <div class="chat-container">
      <header class="chat-header" style="display: none;">
        <button class="btn leave-btn" id="leave-btn"><i class="fas fa-sign-out-alt"></i></button>
        <button class="btn room-btn" id="room-name" onclick="copyRoomLink()"></button>
        <div class="button-holder">
          <button class="btn show-users" onclick="showUsers()"><i class="fas fa-users"></i></button>
          <button class="btn close-users" onclick="closeUsers()"><i class="fas fa-times-circle"></i></button>
        </div>
      </header>
      <main class="chat-main">
        <div class="users-container" style="display: none;">
          <div class="user-list-container">
            <p id="active-user" class="user-item active-user"></p>
            <ul id="user-list"></ul>
          </div>
        </div>
        <div class="chat-sidebar">
          <div class="sidebar-data">
            <div class="room-data">
              <h3>Room Code</h3>
              <div class="room-code-container">
                <button class="btn room-btn" id="room-name" onclick="copyRoomLink()"></button>
              </div>
            </div>
            <div class="users-data">
              <h3>Users</h3>
              <div class="user-list-container">
                <p id="active-user" class="user-item active-user"></p>
                <ul id="user-list"></ul>
              </div>
            </div>
          </div>
          <button class="btn leave-btn" id="leave-btn"><i class="fas fa-sign-out-alt"></i> Leave Room</button>
        </div>
        <div class="chat-main-part">
          <div class="chat-messages"></div>
          <div class="chat-form-container">
            <form id="chat-form">
              <input
                id="msg"
                type="text"
                placeholder="Enter Message"
                required
                autocomplete="off"
              />
              <button class="btn" id="submit-btn" disabled><i class="fas fa-paper-plane"></i></button>
            </form>
          </div>
        </div>
      </div>
      </main>
    <script 
      src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.13.1/qs.min.js" integrity="sha512-dOI8+lI91wsLJEMBQcZBvatYrawv84SrgkRF/6sIcjhYXgANOvOEkBtCSf/ZkdZ7Mw0u+VUxDgalDZA1qKWTFQ==" crossorigin="anonymous" referrerpolicy="no-referrer"
    ></script> <!--query selector-->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/main.js"></script>
    <script>
      const users = document.querySelector('.users-container');

      function showUsers() {
				users.style.display = 'flex'
      }
      function closeUsers() {
				users.style.display = 'none'
      }

      function copyRoomLink() {
        navigator.clipboard.writeText(window.location.href)
      }

    </script>
  </body>
</html>
